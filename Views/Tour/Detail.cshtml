@model Tour

@{
    ViewData["Title"] = Model.Title;
}

<link href="~/lib/lightbox2/css/lightbox.min.css" rel="stylesheet" />

<style>
    #advancedTab .nav-link {
        color: grey;
        font-weight: 600;
        transition: .25s;
        padding: 1rem;
    }

        #advancedTab .nav-link.active {
            color: #0275d8;
            border-bottom: 3px solid #0275d8;
        }

    .btn-grey {
        background-color: #D8D8D8;
        color: #FFF;
    }

    .rating-block {
        background-color: #FAFAFA;
        border: 1px solid #EFEFEF;
        padding: 15px 15px 20px 15px;
        border-radius: 3px;
    }

    .bold {
        font-weight: 700;
    }

    .padding-bottom-7 {
        padding-bottom: 7px;
    }

    .review-block {
        background-color: #FAFAFA;
        border: 1px solid #EFEFEF;
        padding: 15px;
        border-radius: 3px;
        margin-bottom: 15px;
    }

    .review-block-name {
        font-size: 12px;
        margin: 10px 0;
    }

    .review-block-date {
        font-size: 12px;
    }

    .review-block-rate {
        font-size: 13px;
        margin-bottom: 15px;
    }

    .review-block-title {
        font-size: 15px;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .review-block-description {
        font-size: 13px;
    }
</style>

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3">
    <h1 class="h2">@Model.Title</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <a class="btn btn-secondary ml-auto mr-2" asp-action="Index"><span data-feather="arrow-left"></span> Back to list</a>
        <a class="btn btn-primary ml-auto mr-2" asp-action="Edit" asp-route-id="@Model.ID"><span data-feather="edit"></span> Edit</a>
        <form class="text-white" style="cursor: pointer" asp-action="ToggleClose" method="post" asp-route-id="@Model.ID" asp-route-returnUrl="@Context.Request.Path">
            @if (Model.IsOpen)
            {
                <a onclick="$(this).closest('form').submit()" class="btn btn-danger"><span data-feather="trash"></span> Close</a>

            }
            else
            {
                <a onclick="$(this).closest('form').submit()" class="btn btn-success"><span data-feather="refresh-cw"></span> Open</a>
            }
        </form>
    </div>
</div>

<div class="classic-tabs border rounded px-4 pt-1">

    <ul class="nav tabs-primary nav-justified mb-3" id="advancedTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active show" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Information</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="info-tab" data-toggle="tab" href="#info" role="tab" aria-controls="info" aria-selected="false">Trips</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="reviews-tab" data-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="false">Reviews (@Model.Reviews.Count)</a>
        </li>
    </ul>
    <div class="tab-content" id="advancedTabContent">
        <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
            <div class="table-responsive">
                <table class="table">
                    <tbody>
                        <tr>
                            <th>@Html.DisplayNameFor(m => m.ID)</th>
                            <td>@Html.DisplayFor(m => m.ID)</td>
                        </tr>
                        <tr>
                            <th>@Html.DisplayNameFor(m => m.Title)</th>
                            <td>@Html.DisplayFor(m => m.Title)</td>
                        </tr>
                        <tr>
                            <th>@Html.DisplayNameFor(m => m.StartPlace)</th>
                            <td>@Html.DisplayFor(m => m.StartPlace)</td>
                        </tr>
                        <tr>
                            <th>@Html.DisplayNameFor(m => m.Destination)</th>
                            <td>@Html.DisplayFor(m => m.Destination)</td>
                        </tr>
                        <tr>
                            <th>@Html.DisplayNameFor(m => m.Description)</th>
                            <td>@Html.DisplayFor(m => m.Description)</td>
                        </tr>
                        <tr>
                            <th>Images</th>
                            <td class="d-flex flex-wrap">
                                @foreach (var url in Model.ImageUrls)
                                {
                                    <a data-lightbox="tour-images" href="@url"><img style="height: 10rem" src="@url" class="img-fluid mr-2 mb-2" /></a>
                                }
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="tab-pane fade" id="info" role="tabpanel" aria-labelledby="info-tab">
            <a asp-controller="Trip" asp-action="New" asp-route-tourID="@Model.ID" asp-route-returnUrl="@Context.Request.Path" class="btn btn-success mb-3">
                <span data-feather="plus"></span> New Trip
            </a>
            @if (Model.Trips.Any())
            {
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>@Html.DisplayNameFor(_ => Model.Trips.First().ID)</th>
                                <th>@Html.DisplayNameFor(_ => Model.Trips.First().StartTime)</th>
                                <th>@Html.DisplayNameFor(_ => Model.Trips.First().EndTime)</th>
                                <th>@Html.DisplayNameFor(_ => Model.Trips.First().Capacity)</th>
                                <th>@Html.DisplayNameFor(_ => Model.Trips.First().Price)</th>
                                <th>Sale Price</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var trip in Model.Trips)
                            {
                                <tr>
                                    <td>
                                        @trip.ID
                                        @if (!trip.IsOpen)
                                        {
                                            <span class="badge badge-danger">Closed</span>
                                        }
                                    </td>
                                    <td>@trip.StartTime</td>
                                    <td>@trip.EndTime</td>
                                    <td>@trip.Capacity</td>
                                    <td>$@trip.Price</td>
                                    <td class="text-success">$@trip.GetSalePrice()<span class="d-none d-md-inline" data-feather="chevrons-down"></span></td>
                                    <td class="row">
                                        <a class="mr-3 text-primary mb-3 mb-md-0" asp-controller="Trip" asp-action="Detail" asp-route-id="@trip.ID"><span data-feather="navigation" /></a>
                                        <a class="mr-3 text-warning mb-3 mb-md-0" asp-controller="Trip" asp-action="Edit" asp-route-id="@trip.ID" asp-route-returnUrl="@Context.Request.Path"><span data-feather="edit" /></a>
                                        <form style="cursor: pointer" class="d-inline" asp-controller="Trip" asp-action="ToggleClose" asp-route-id="@trip.ID" asp-route-returnUrl="@Context.Request.Path" method="post">
                                            @if (trip.IsOpen)
                                            {<a onclick="$(this).closest('form').submit()" class="text-danger d-inline"><span data-feather="trash" /></a> }
                                            else
                                            { <a onclick="$(this).closest('form').submit()" class="text-success d-inline"><span data-feather="refresh-cw" /></a>}
                                        </form>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
            else
            {
                <p class="text-muted text-center">No trips are available for this tour</p>
            }
        </div>
        <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
            <div class="row">
                <div class="col-sm-4">
                    <div class="rating-block">
                        <h4>Average user rating</h4>
                        <h2 class="bold padding-bottom-7">4.3 <small>/ 5</small></h2>
                        <span class="text-warning" data-feather="star"></span>
                        <span class="text-warning" data-feather="star"></span>
                        <span class="text-warning" data-feather="star"></span>
                        <span class="text-warning" data-feather="star"></span>
                        <span class="text-muted" data-feather="star"></span>
                    </div>
                </div>
                <div class="col-sm-3">
                    <h4>Rating breakdown</h4>
                    <div class="pull-left d-flex">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">5 <span data-feather="star" style="transform: translateY(-2px)"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div class="progress-bar bg-success" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="5" style="width: 1000%; color: green;">
                                    <span class="sr-only">80% Complete (danger)</span>
                                </div>
                            </div>
                        </div>
                        <div class="pull-right" style="margin-left:10px;">1</div>
                    </div>
                    <div class="pull-left d-flex">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">4 <span data-feather="star" style="transform: translateY(-2px)"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div class="progress-bar bg-primary" role="progressbar" aria-valuenow="4" aria-valuemin="0" aria-valuemax="5" style="width: 80%">
                                    <span class="sr-only">80% Complete (danger)</span>
                                </div>
                            </div>
                        </div>
                        <div class="pull-right" style="margin-left:10px;">1</div>
                    </div>
                    <div class="pull-left d-flex">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">3 <span data-feather="star" style="transform: translateY(-2px)"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div class="progress-bar bg-info" role="progressbar" aria-valuenow="3" aria-valuemin="0" aria-valuemax="5" style="width: 60%">
                                    <span class="sr-only">80% Complete (danger)</span>
                                </div>
                            </div>
                        </div>
                        <div class="pull-right" style="margin-left:10px;">0</div>
                    </div>
                    <div class="pull-left d-flex">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">2 <span data-feather="star" style="transform: translateY(-2px)"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div class="progress-bar bg-warning" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="5" style="width: 40%">
                                    <span class="sr-only">80% Complete (danger)</span>
                                </div>
                            </div>
                        </div>
                        <div class="pull-right" style="margin-left:10px;">0</div>
                    </div>
                    <div class="pull-left d-flex">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">1 <span data-feather="star" style="transform: translateY(-2px)"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div class="progress-bar bg-danger" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="5" style="width: 20%">
                                    <span class="sr-only">80% Complete (danger)</span>
                                </div>
                            </div>
                        </div>
                        <div class="pull-right" style="margin-left:10px;">0</div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-7">
                    <hr />
                    <div class="review-block">
                        <div class="row">
                            <div class="col-sm-3">
                                <img src="https://i.kym-cdn.com/photos/images/newsfeed/001/688/970/a72.jpg" class="rounded" style="width: 5rem; height: 5rem; object-fit: cover;">
                                <div class="review-block-name"><a href="#">nktailor</a></div>
                                <div class="review-block-date">January 29, 2016<br />1 day ago</div>
                            </div>
                            <div class="col-sm-9">
                                <div class="review-block-rate">
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-muted" data-feather="star"></span>
                                </div>
                                <div class="review-block-title">this was nice tour</div>
                                <div class="review-block-description">this was nice tour. this was nice tour. this was nice tour. this was nice tour this was nice tour this was nice tour this was nice tour this was nice tour</div>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="col-sm-3">
                                <img src="https://i.kym-cdn.com/photos/images/newsfeed/001/688/970/a72.jpg" class="rounded" style="width: 5rem; height: 5rem; object-fit: cover;">
                                <div class="review-block-name"><a href="#">nktailor</a></div>
                                <div class="review-block-date">January 29, 2016<br />1 day ago</div>
                            </div>
                            <div class="col-sm-9">
                                <div class="review-block-rate">
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-muted" data-feather="star"></span>
                                </div>
                                <div class="review-block-title">this was nice tour</div>
                                <div class="review-block-description">this was nice tour. this was nice tour. this was nice tour. this was nice tour this was nice tour this was nice tour this was nice tour this was nice tour</div>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="col-sm-3">
                                <img src="https://i.kym-cdn.com/photos/images/newsfeed/001/688/970/a72.jpg" class="rounded" style="width: 5rem; height: 5rem; object-fit: cover;">
                                <div class="review-block-name"><a href="#">nktailor</a></div>
                                <div class="review-block-date">January 29, 2016<br />1 day ago</div>
                            </div>
                            <div class="col-sm-9">
                                <div class="review-block-rate">
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-warning" data-feather="star"></span>
                                    <span class="text-muted" data-feather="star"></span>
                                </div>
                                <div class="review-block-title">this was nice tour</div>
                                <div class="review-block-description">this was nice tour. this was nice tour. this was nice tour. this was nice tour this was nice tour this was nice tour this was nice tour this was nice tour</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

@section Scripts {
    <script src="~/lib/lightbox2/js/lightbox.min.js"></script>
}  